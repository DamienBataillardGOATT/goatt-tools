<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/static/css/styles.css">
    <title>Commande</title>
</head>
<body>
    <h1>Passer une Commande</h1>
    <form action="/order/submit_order" method="post" id="orderForm">

        <!-- Choix de la marque de cordage -->
        <label for="cordage_marque">Marque du cordage :</label>
        <select id="cordage_id" name="cordage_id" onchange="updatePrix()">
            {% for marque, info in cordages_info.items() %}
                <option value="{{ marque }}" data-prix="{{ info.prix }}">{{ marque }}</option>
            {% endfor %}
        </select>
        
        <p id="prix_cordage">Prix: </p>
        
        <!-- Quantité de cordage -->
        <label for="cordage_quantite">Quantité :</label>
        <input type="number" id="cordage_quantite" name="cordage_quantite" min="1" placeholder="Quantité" required>

        <!-- Bouton pour ajouter au panier -->
        <button type="button" onclick="ajouterAuPanier()">Ajouter au panier</button>

        <!-- Panier -->
        <div id="panier">
            <h2>Votre panier :</h2>
            <ul id="listePanier">
                <!-- Les articles du panier seront ajoutés ici -->
            </ul>
            <p>Total: <span id="totalPanier">0</span> €</p>
            <!-- Champ caché pour stocker le total du panier -->
            <input type="hidden" id="prixTotalPanier" name="prixTotalPanier" value="0">
        </div>

        <!-- Option de récupération -->
        <div>
            <p>Ou souhaitez-vous déposer votre raquette ? :</p>
            <input type="radio" id="recuperation_adresse" name="option_recuperation" value="adresse" required>
            <label for="recuperation_adresse">À une adresse personnelle</label><br>
            
            <input type="radio" id="recuperation_magasin" name="option_recuperation" value="magasin" required>
            <label for="recuperation_magasin">Dans un magasin</label>
        </div>

        <!-- Adresse de récupération -->
        <div id="adresse_recuperation_container" style="display:none;">
            <label for="adresse_recuperation">Adresse de récupération :</label>
            <input type="text" id="adresse_recuperation" name="adresse_recuperation" placeholder="Ex : 15 Av de CLichy, 75017 Paris, France">
        </div>

        <!-- Sélection du magasin -->
        <div id="magasin_recuperation_container" style="display:none;">
            <label for="magasin_recuperation">Sélectionnez un magasin :</label>
            <select id="magasin_recuperation" name="magasin_recuperation">
                <!-- Insérez les options de magasin ici -->
                <option value="magasin1" data-adresse="174 Quai de Jemmapes, 75010 Paris, France">Magasin 1</option>
                <option value="magasin2" data-adresse="174 Quai de Jemmapes, 75010 Paris, France">Magasin 2</option>
            </select>
        </div>

        <!-- Champ caché pour stocker l'adresse du magasin sélectionné -->
        <input type="hidden" id="adresse_magasin" name="adresse_magasin">

        <!-- Sélection de la date de récupération de la raquette -->
        <div>
            <label for="date_depot">Date de dépôt de la raquette :</label>
            <input type="date" id="date_depot" name="date_depot" required>
        </div>

        <!-- Sélection de l'heure de récupération de la raquette en heures pleines -->
        <div>
            <label for="heure_recuperation">Heure de récupération (0-23) :</label>
            <input type="number" id="heure_recuperation" name="heure_recuperation" min="0" max="23" step="1" placeholder="13" required>
        </div>

        <!-- Option de livraison -->
        <div>
            <p>Ou souhaitez-vous récuperer votre raquette :</p>
            <input type="radio" id="livraison_adresse" name="option_livraison" value="adresse" required>
            <label for="livraison_adresse">À une adresse personnelle</label><br>
            
            <input type="radio" id="livraison_magasin" name="option_livraison" value="magasin" required>
            <label for="livraison_magasin">Dans un magasin</label>
        </div>

        <!-- Adresse de livraison -->
        <div id="adresse_livraison_container" style="display:none;">
            <label for="adresse_livraison">Adresse de livraison :</label>
            <input type="text" id="adresse_livraison" name="adresse_livraison" placeholder="Ex : 15 Av de CLichy, 75017 Paris, France">
        </div>

        <!-- Sélection du magasin pour la livraison -->
        <div id="magasin_livraison_container" style="display:none;">
            <label for="magasin_livraison">Sélectionnez un magasin pour la livraison :</label>
            <select id="magasin_livraison" name="magasin_livraison">
                <!-- Insérez les options de magasin ici -->
                <option value="magasin1" data-adresse="174 Quai de Jemmapes, 75010 Paris, France">Magasin 1</option>
                <option value="magasin2" data-adresse="174 Quai de Jemmapes, 75010 Paris, France">Magasin 2</option>
            </select>
        </div>

        <!-- Champ caché pour stocker l'adresse du magasin de livraison sélectionné -->
        <input type="hidden" id="adresse_magasin_livraison" name="adresse_magasin_livraison">

        <!-- Sélection de la date de récupération/livraison -->
        <label for="date_recuperation">Date de récupération/livraison :</label>
        <select id="date_recuperation" name="date_recuperation" onchange="afficherCreneauxPourDate()">
        <!-- Les options de date seront ajoutées ici par JavaScript -->
        </select>

        <!-- Conteneur pour les boutons de créneaux horaires -->
        <div id="creneauxHorairesContainer">
            <!-- Les boutons de créneaux seront ajoutés ici par JavaScript -->
        </div>

        <!-- Champ caché pour stocker le créneau de récupération/livraison sélectionné -->
        <input type="hidden" id="creneauSelectionne" name="creneauSelectionne">

        <input type="submit" value="Passer la commande">
    </form>

    <script src="/static/scripts/script.js"></script>
</body>
</html>
