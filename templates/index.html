<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/static/css/styles.css">
    <title>Commande</title>
</head>
<body>
    <h1>Passer une Commande</h1>
    <form action="/order/submit_order" method="post" id="orderForm">

        <!-- Choice of string brand -->
        <label for="string_brand">Marque du cordage :</label>
        <select id="string_id" name="string_id" onchange="updatePrice()">
            {% for marque, info in strings_info.items() %}
                <option value="{{ marque }}" data-prix="{{ info.prix }}" data-shopify-variant-id="{{ info.shopify_variant_id }}">{{ marque }}</option>
            {% endfor %}
        </select>

        <!-- Hidden field to store the shopify variant id -->
        <input type="hidden" id="shopifyVariantId" name="shopifyVariantId">
        
        <p id="string_price"></p>
        
        <!-- Quantity of string -->
        <label for="string_quantity">Quantité: </label>
        <input type="number" id="string_quantity" name="string_quantity" min="0" placeholder="1,2,3,..." required>

        <!-- Button to add to cart -->
        <button type="button" onclick="addToCart()">Ajouter au panier</button>

        <!-- Cart -->
        <div id="cart">
            <h2>Votre panier :</h2>
            <ul id="cartList">
                <!-- Cart items will be added here -->
            </ul>
            <p>Total: <span id="cartTotal">0</span> €</p>
            <!-- Hidden field to store the total cart price -->
            <input type="hidden" id="totalCartPrice" name="totalCartPrice" value="0">
        </div>

        <!-- Pickup option -->
        <div>
            <p>Ou souhaitez-vous déposer votre raquette ? :</p>
            <input type="radio" id="pickup_address" name="pickup_option" value="address" required>
            <label for="pickup_address">À une adresse personnelle</label><br>
            
            <input type="radio" id="pickup_store" name="pickup_option" value="store" required>
            <label for="pickup_store">Dans un magasin</label>
        </div>

        <!-- Pickup address -->
        <div id="pickup_address_container" style="display:none;">
            <label for="pickup_address">Adresse de récupération :</label>
            <input type="text" id="pickup_address" name="pickup_address" placeholder="Ex: 15 Av de Clichy, 75017 Paris, France">
        </div>

        <!-- Store selection for pickup -->
        <div id="store_pickup_container" style="display:none;">
            <label for="store_pickup">Sélectionnez un magasin :</label>
            <select id="store_pickup" name="store_pickup">
                <!-- Insert store options here -->
                <option value="store1" data-address="174 Quai de Jemmapes, 75010 Paris, France">Magasin 1</option>
                <option value="store2" data-address="174 Quai de Jemmapes, 75010 Paris, France">Magasin 2</option>
            </select>
        </div>

        <!-- Hidden field to store the selected store's address -->
        <input type="hidden" id="store_address" name="store_address">

        <!-- Selection of racket drop-off date -->
        <div>
            <label for="deposit_date">Date de dépôt de la raquette :</label>
            <input type="date" id="deposit_date" name="deposit_date" required>
        </div>

        <!-- Selection of racket pickup time in full hours -->
        <div>
            <label for="pickup_time">Heure de récupération (0-23) :</label>
            <input type="number" id="pickup_time" name="pickup_time" min="0" max="23" step="1" placeholder="13" required>
        </div>

        <!-- Delivery option -->
        <div>
            <p>Ou souhaitez-vous récuperer votre raquette :</p>
            <input type="radio" id="delivery_address" name="delivery_option" value="address" required>
            <label for="delivery_address">À une adresse personnelle</label><br>
            
            <input type="radio" id="delivery_store" name="delivery_option" value="store" required>
            <label for="delivery_store">Dans un magasin</label>
        </div>

        <!-- Delivery address -->
        <div id="delivery_address_container" style="display:none;">
            <label for="delivery_address">Adresse de livraison :</label>
            <input type="text" id="delivery_address" name="delivery_address" placeholder="Ex: 15 Av de Clichy, 75017 Paris, France">
        </div>

        <!-- Store selection for delivery -->
        <div id="store_delivery_container" style="display:none;">
            <label for="store_delivery">Sélectionnez un magasin pour la livraison :</label>
            <select id="store_delivery" name="store_delivery">
                <!-- Insert store options here -->
                <option value="store1" data-address="174 Quai de Jemmapes, 75010 Paris, France">Magasin 1</option>
                <option value="store2" data-address="174 Quai de Jemmapes, 75010 Paris, France">Magasin 2</option>
            </select>
        </div>

        <!-- Hidden field to store the selected delivery store's address -->
        <input type="hidden" id="store_delivery_address" name="store_delivery_address">

        <!-- Selection of pickup/delivery date -->
        <label for="pickup_delivery_date">Date de récupération/livraison :</label>
        <select id="pickup_delivery_date" name="pickup_delivery_date" onchange="displaySlotsForDate()">
        <!-- Date options will be added here by JavaScript -->
        </select>

        <!-- Container for time slot buttons -->
        <div id="timeSlotsContainer">
            <!-- Time slot buttons will be added here by JavaScript -->
        </div>

        <!-- Hidden field to store the selected pickup/delivery time slot -->
        <input type="hidden" id="selected_slot" name="selected_slot">

        <input type="submit" value="Passer la commande">
    </form>
    <script src="/static/scripts/script.js"></script>
</body>
</html>
