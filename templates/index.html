<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/static/css/styles.css">
    <title>Nouvelle pose cordage</title>
</head>
<body>
    <h1>Nouvelle pose cordage</h1>
    <form action="/order/stringing_order" method="post" id="orderForm">

        <script>
            let stringsInfo = JSON.parse('{{ strings_info | tojson | safe }}');
        </script>

        <label for="string_brand">Marque du cordage :</label>
        <input type="text" id="searchInput" name="searchInput" onkeyup="searchRaquette()" onchange="updatePrice()" placeholder="Recherchez une raquette...">
        <div id="suggestions" class="suggestions"></div>

        <!-- Hidden field to store the shopify variant id -->
        <input type="hidden" id="shopifyVariantId" name="shopifyVariantId">
        
        <p id="string_price"></p>
        
        <!-- Quantity of string -->
        <label for="string_quantity">Quantité: </label>
        <input type="number" id="string_quantity" name="string_quantity" min="0" placeholder="1,2,3,..." required>

        <!-- Button to add to cart -->
        <button type="button" onclick="addToCart()">Ajouter au panier</button>

        <!-- Cart -->
        <div id="cart">
            <h2>Votre panier :</h2>
            <ul id="cartList">
                <!-- Cart items will be added here -->
            </ul>
            <p>Total: <span id="cartTotal">0</span> €</p>
            <!-- Hidden field to store the total cart price -->
            <input type="hidden" id="totalCartPrice" name="totalCartPrice" value="0">
        </div>

        <!-- Pickup option -->
        <div>
            <p>Récupération de la raquette : </p>
            <div class="radio-label-container">
                <label for="pickup_address_radio">À une adresse personnelle</label>
                <input type="radio" id="pickup_address_radio" name="pickup_option" value="address">
            </div>
            <div class="radio-label-container">
                <label for="pickup_store_radio">Dans ce magasin</label>
                <input type="radio" id="pickup_store_radio" name="pickup_option" value="store" checked required>
            </div>
        </div>


        <!-- Pickup address -->
        <div id="pickup_address_container" style="display:none;">
            <label for="pickup_address">Adresse de récupération :</label>
            <input type="text" id="pickup_address" name="pickup_address" placeholder="Ex: 15 Av de Clichy, 75017 Paris, France">
        </div>

        <!-- Hidden field to store the selected store's address -->
        <input type="hidden" id="store_pickup_address" name="store_pickup_address">

        <!-- Selection of racket drop-off date -->
        <div>
            <label for="deposit_date">Date de dépôt de la raquette :</label>
            <input type="date" id="deposit_date" name="deposit_date" required>
        </div>

        <!-- Selection of racket pickup time in full hours -->
        <div id="pickup_time_container" style="display:none;">
            <label for="pickup_time">Heure de récupération (0-23) :</label>
            <input type="number" id="pickup_time" name="pickup_time" min="0" max="23" step="1" placeholder="13">
        </div>

        <!-- Delivery option -->
        <div>
            <p>Livraison de la raquette :</p>
            <div class="radio-label-container">
                <label for="delivery_address_radio">À une adresse personnelle</label>
                <input type="radio" id="delivery_address_radio" name="delivery_option" value="address">
            </div>
            <div class="radio-label-container">
                <label for="delivery_store_radio">Dans ce magasin</label>
                <input type="radio" id="delivery_store_radio" name="delivery_option" value="store" checked required>
            </div>
        </div>

        <!-- Delivery address -->
        <div id="delivery_address_container" style="display:none;">
            <label for="delivery_address">Adresse de livraison :</label>
            <input type="text" id="delivery_address" name="delivery_address" placeholder="Ex: 15 Av de Clichy, 75017 Paris, France">
        </div>

        <!-- Hidden field to store the selected delivery store's address -->
        <input type="hidden" id="store_delivery_address" name="store_delivery_address">

        <!-- Selection of pickup/delivery date -->
        <label for="pickup_delivery_date">Date de récupération/livraison :</label>
        <select id="pickup_delivery_date" name="pickup_delivery_date" onchange="displaySlotsForDate()">
        <!-- Date options will be added here by JavaScript -->
        </select>

        <!-- Container for time slot buttons -->
        <div id="timeSlotsContainer">
            <!-- Time slot buttons will be added here by JavaScript -->
        </div>

        <!-- Hidden field to store the selected pickup/delivery time slot -->
        <input type="hidden" id="selected_slot" name="selected_slot">

        <input type="submit" value="Passer la commande">
    </form>
    <script src="/static/scripts/script.js"></script>
</body>
</html>
